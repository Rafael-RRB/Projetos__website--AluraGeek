null===JSON.parse(sessionStorage.getItem("login"))?(alert("Você não está autorizado a acessar esta página."),window.location.replace("../index.html")):!0!==JSON.parse(sessionStorage.getItem("login")).login&&(alert("Você não está autorizado a acessar esta página."),window.location.replace("../index.html"));const messagesDefault=["URL da imagem do produto","Categoria do produto","Nome do produto","Preço do produto","Descrição do produto"],messagesSuccess=["URL da imagem válida","Categoria do produto válida","Nome do produto válido","Preço do produto válido","Descrição do produto válido"],messagesError=["URL da imagem é inválida","Categoria é muito curta","Categoria é muito longa","Nome é muito curto","Nome é muito longo","Preço é muito baixo","Preço é muito alto","Descrição é muito curta","Descrição é muito longa"],regexImage=new RegExp([".webp$",".jpg$",".jpeg$",".gif$",".png$",".apng$",".svg$",".bmp$"].join("|"),"i"),buttonAdd=document.getElementById("buttonAdd"),labelList=$$(".formulario__container"),labelTextList=$$(".formulario__container>.formulario__label"),inputList=$$(".formulario__campo"),formNovoProduto=$(".login__formulario");var inputListStatus=[];for(let t=0;t<5;t++)inputListStatus.push(0);if(null!==sessionStorage.getItem("editProduct")){if((editProduct=JSON.parse(sessionStorage.getItem("editProduct"))).edit){let t=productListArray._productList[editProduct.index];$(".login__titulo").innerText="Editando o produto",inputList[0].value=t._img,inputList[1].value=t._category,inputList[2].value=t._name,inputList[3].value=parseInt(t._price),inputList[4].value=t._description}}else var editProduct={edit:!1,index:-1};inputList[0].addEventListener("focusout",()=>{""==inputList[0].value?(classResult(labelList[0],void 0),labelResult(labelTextList[0],messagesDefault[0],""),inputListStatus[0]=0):regexImage.test(inputList[0].value)?(classResult(labelList[0],!0),labelResult(labelTextList[0],messagesSuccess[0],""),inputListStatus[0]=1):(classResult(labelList[0],!1),labelResult(labelTextList[0],messagesError[0],""),inputListStatus[0]=0)}),inputList[1].addEventListener("focusout",()=>{""==inputList[1].value?(classResult(labelList[1],void 0),labelResult(labelTextList[1],messagesDefault[1],""),inputListStatus[1]=0):inputList[1].value.length<1?(classResult(labelList[1],!1),labelResult(labelTextList[1],messagesError[1],""),inputListStatus[1]=0):inputList[1].value.length>11?(classResult(labelList[1],!1),labelResult(labelTextList[1],messagesError[2],""),inputListStatus[1]=0):(classResult(labelList[1],!0),labelResult(labelTextList[1],messagesSuccess[1],""),inputListStatus[1]=1)}),inputList[2].addEventListener("focusout",()=>{""==inputList[2].value?(classResult(labelList[2],void 0),labelResult(labelTextList[2],messagesDefault[2],""),inputListStatus[2]=0):inputList[2].value.length<3?(classResult(labelList[2],!1),labelResult(labelTextList[2],messagesError[3],""),inputListStatus[2]=0):inputList[2].value.length>12?(classResult(labelList[2],!1),labelResult(labelTextList[2],messagesError[4],""),inputListStatus[2]=0):(classResult(labelList[2],!0),labelResult(labelTextList[2],messagesSuccess[2],""),inputListStatus[2]=1)}),inputList[3].addEventListener("focusout",()=>{""==inputList[3].value?(classResult(labelList[3],void 0),labelResult(labelTextList[3],messagesDefault[3],""),inputListStatus[3]=0):inputList[3].value<.99?(classResult(labelList[3],!1),labelResult(labelTextList[3],messagesError[5],""),inputListStatus[3]=0):inputList[3].value>9999.99?(classResult(labelList[3],!1),labelResult(labelTextList[3],messagesError[6],""),inputListStatus[3]=0):(classResult(labelList[3],!0),labelResult(labelTextList[3],messagesSuccess[3],""),inputListStatus[3]=1)}),inputList[4].addEventListener("focusout",()=>{""==inputList[4].value?(classResult(labelList[4],void 0),labelResult(labelTextList[4],messagesDefault[4],""),inputListStatus[4]=0):inputList[4].value.length<20?(classResult(labelList[4],!1),labelResult(labelTextList[4],messagesError[7],""),inputListStatus[4]=0):inputList[4].value.length>100?(classResult(labelList[4],!1),labelResult(labelTextList[4],messagesError[8],""),inputListStatus[4]=0):(classResult(labelList[4],!0),labelResult(labelTextList[4],messagesSuccess[4],""),inputListStatus[4]=1)}),buttonAdd.addEventListener("click",t=>{if(t.preventDefault(),inputListStatus.includes(0))alert("Os campos não foram preenchidos corretamente!");else if(editProduct.edit){let t=(()=>{var t=$("form").querySelectorAll("label>input,label>textarea"),e=[];for(let s=0;s<t.length;s++)e[s]=t[s].value;return e})();new productHandler(t[0],t[1],t[2],t[3],t[4],1,editProduct.index),clearForm(formNovoProduto,messagesDefault),sessionStorage.removeItem("editProduct"),window.location.href="../html/lista_produtos.html"}else{let t=(()=>{var t=$("form").querySelectorAll("label>input,label>textarea"),e=[];for(let s=0;s<t.length;s++)e[s]=t[s].value;return e})();new productHandler(t[0],t[1],t[2],t[3],t[4],0,editProduct.index),clearForm(formNovoProduto,messagesDefault)}});