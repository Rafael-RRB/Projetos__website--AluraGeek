const productListMain=$("main>.principal__lista-cartao");let tempArray=[];productListMain.innerHTML=(()=>{for(let t=0;t<productListArray._productList.length;t++)tempArray[t]=`\n    <article class="lista-cartoes__cartao">\n      <div class="cartao__imagem">\n        ${(()=>null===JSON.parse(sessionStorage.getItem("login"))?"":!0===JSON.parse(sessionStorage.getItem("login")).login?'\n              <button href="#" class="imagem__deletar">\n                <span class="hide-text">Deletar produto</span>\n              </button>\n              \n              <a href="#" class="imagem__editar">\n                <span class="hide-text">Editar produto.</span>\n              </a>\n              ':void 0)()}\n      </div>\n  \n      <a href="lista_produtos.html" class="cartao__descricao">\n        <h2 class="descricao__titulo">${productListArray._productList[t]._name}</h2>\n        <p class="descricao__preco">R$${productListArray._productList[t]._price}</p>\n        <p class="descricao__link">Ver produto</p>\n      </a>\n    </article>\n    `;return tempArray.join(" ")})();let htmlCardList=$$(".lista-cartoes__cartao>.cartao__imagem");for(let t=0;t<htmlCardList.length;t++)/http/g.test(productListArray._productList[t]._img)?htmlCardList[t].style.backgroundImage=`url(${(()=>`${productListArray._productList[t]._img.match(/src="([^"]+)/)[1]})`)()}`:htmlCardList[t].style.backgroundImage=`url(${(()=>`../${productListArray._productList[t]._img.match(/src="([^"]+)/)[1]})`)()}`;function productDeleteCond(){let t=(()=>{let t=[];for(let r=0;r<productListArray._productList.length;r++)t.includes(productListArray._productList[r]._category)||t.push(productListArray._productList[r]._category);return t})(),r=(()=>{let r=[];for(let e=0;e<t.length;e++){r[e]=0;for(let o=0;o<productListArray._productList.length;o++)t[e].includes(productListArray._productList[o]._category)&&(r[e]+=1)}return r})(),e=(()=>{let t=0;for(let e=0;e<r.length;e++)r[e]>5&&(t+=1);return t<3})();switch(!0){case productListArray._productList.length-1<18:return 0;case t.length<3:return 1;case e:return 2;default:return-1}}let productEdit=$$(".cartao__imagem>.imagem__editar");for(let t=0;t<productEdit.length;t++)productEdit[t].addEventListener("click",r=>{r.preventDefault(),sessionStorage.setItem("editProduct",JSON.stringify({edit:!0,index:t})),window.location.href="../html/novo_produto.html"});let productDelete=$$(".cartao__imagem>.imagem__deletar");for(let t=0;t<productDelete.length;t++)productDelete[t].addEventListener("click",r=>{switch(!0){case-1===productDeleteCond():confirm(`Você tem certeza que quer deletar "${productListArray._productList[t]._name}"?`)&&(productListArray._productList.splice(t,1),localStorage.setItem("productListArray",JSON.stringify(productListArray._productList)),location.reload());break;case 0===productDeleteCond():alert("Erro: é necessário haver um mínimo de 18 produtos.");break;case 1===productDeleteCond():alert("Erro: é necessário haver um mínimo de 3 categorias diferentes.");break;case 2===productDeleteCond():alert("Erro: é necessário haver pelo menos 6 produtos em 3 categorias diferentes.")}});let linkViewProduct=$$(".lista-cartoes__cartao>a");for(let t=0;t<linkViewProduct.length;t++)linkViewProduct[t].addEventListener("click",r=>{r.preventDefault();let e=productListArray._productList[t]._category,o=JSON.parse(JSON.stringify(productListArray._productList));o.splice(t,1);let a=[];sessionStorage.setItem("productOrderCurrent",JSON.stringify(productListArray._productList[t]));for(let t=0;t<o.length;t++)e===o[t]._category&&a.push(o[t]);(()=>{for(let t=0;a.length>5;t++){let t=Math.floor(Math.random()*a.length);a.splice(t,1)}})(),a=JSON.parse(JSON.stringify(a)),sessionStorage.setItem("productOrderCategoryList",JSON.stringify(a)),window.location.href="../html/produto.html"});null===sessionStorage.getItem("login")&&$(".heading__botao").remove();